{"ast":null,"code":"import React,{useState}from'react';import{Music,Play}from'lucide-react';import YouTubeUrlInput from'./components/YouTubeUrlInput';import WaveformViewer from'./components/WaveformViewer';import AnalysisPanel from'./components/AnalysisPanel';import LegalDisclaimer from'./components/LegalDisclaimer';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[currentJob,setCurrentJob]=useState(null);const[jobStatus,setJobStatus]=useState('idle');const[waveformData,setWaveformData]=useState(null);const[analysisResult,setAnalysisResult]=useState(null);const[showDisclaimer,setShowDisclaimer]=useState(false);const[trimSelection,setTrimSelection]=useState(null);const handleJobCreated=jobId=>{setCurrentJob(jobId);setJobStatus('processing');};const handleWaveformLoaded=data=>{setWaveformData(data);setJobStatus('ready');};const handleAnalysisComplete=result=>{setAnalysisResult(result);setJobStatus('analyzed');};const handleTrimSelection=(start,end)=>{setTrimSelection({start,end});};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"bg-white shadow-sm border-b\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between h-16\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(Music,{className:\"h-8 w-8 text-primary-600\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"SongSensei\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded\",children:\"MVP\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-4\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-600\",children:[\"Status: \",/*#__PURE__*/_jsx(\"span\",{className:\"capitalize font-medium\",children:jobStatus})]})})]})})}),/*#__PURE__*/_jsx(\"main\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"1. Load YouTube Video\"}),/*#__PURE__*/_jsx(YouTubeUrlInput,{onJobCreated:handleJobCreated,onShowDisclaimer:()=>setShowDisclaimer(true),disabled:jobStatus==='processing'})]}),(jobStatus==='processing'||waveformData)&&/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"2. Trim Audio Segment\"}),/*#__PURE__*/_jsx(WaveformViewer,{jobId:currentJob,data:waveformData,onDataLoaded:handleWaveformLoaded,onTrimSelection:handleTrimSelection,isLoading:jobStatus==='processing'})]}),trimSelection&&jobStatus==='ready'&&/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"3. Analyze Musical Content\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[\"Selected: \",trimSelection.start.toFixed(1),\"s - \",trimSelection.end.toFixed(1),\"s (\",(trimSelection.end-trimSelection.start).toFixed(1),\"s duration)\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn-primary\",onClick:()=>{setJobStatus('analyzing');// TODO: Trigger analysis\n},children:[/*#__PURE__*/_jsx(Play,{className:\"h-4 w-4 mr-2\"}),\"Analyze Chords & Tabs\"]})]})]}),analysisResult&&/*#__PURE__*/_jsx(AnalysisPanel,{result:analysisResult,jobId:currentJob,trimSelection:trimSelection}),jobStatus==='analyzing'&&/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center py-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"loading-dots mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Analyzing musical content...\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-2\",children:\"This may take 20-40 seconds for high-accuracy results\"})]})})})]})}),/*#__PURE__*/_jsx(\"footer\",{className:\"bg-white border-t mt-16\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-sm text-gray-500\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"SongSensei MVP - Educational use only\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-4\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Powered by yt-dlp, Essentia, madmom & music21\"})})]})})}),showDisclaimer&&/*#__PURE__*/_jsx(LegalDisclaimer,{onAccept:()=>setShowDisclaimer(false),onCancel:()=>setShowDisclaimer(false)})]});}export default App;","map":{"version":3,"names":["React","useState","Music","Play","YouTubeUrlInput","WaveformViewer","AnalysisPanel","LegalDisclaimer","jsx","_jsx","jsxs","_jsxs","App","currentJob","setCurrentJob","jobStatus","setJobStatus","waveformData","setWaveformData","analysisResult","setAnalysisResult","showDisclaimer","setShowDisclaimer","trimSelection","setTrimSelection","handleJobCreated","jobId","handleWaveformLoaded","data","handleAnalysisComplete","result","handleTrimSelection","start","end","className","children","onJobCreated","onShowDisclaimer","disabled","onDataLoaded","onTrimSelection","isLoading","toFixed","onClick","onAccept","onCancel"],"sources":["C:/Users/zacha/OneDrive/Documents/cline_workspace/songsensei/web/src/App.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Music, Play, Square, Download } from 'lucide-react';\r\nimport YouTubeUrlInput from './components/YouTubeUrlInput';\r\nimport WaveformViewer from './components/WaveformViewer';\r\nimport AnalysisPanel from './components/AnalysisPanel';\r\nimport LegalDisclaimer from './components/LegalDisclaimer';\r\nimport { AnalysisResult, JobStatus } from './types/analysis';\r\n\r\nfunction App() {\r\n  const [currentJob, setCurrentJob] = useState<string | null>(null);\r\n  const [jobStatus, setJobStatus] = useState<JobStatus>('idle');\r\n  const [waveformData, setWaveformData] = useState<any>(null);\r\n  const [analysisResult, setAnalysisResult] = useState<AnalysisResult | null>(null);\r\n  const [showDisclaimer, setShowDisclaimer] = useState(false);\r\n  const [trimSelection, setTrimSelection] = useState<{ start: number; end: number } | null>(null);\r\n\r\n  const handleJobCreated = (jobId: string) => {\r\n    setCurrentJob(jobId);\r\n    setJobStatus('processing');\r\n  };\r\n\r\n  const handleWaveformLoaded = (data: any) => {\r\n    setWaveformData(data);\r\n    setJobStatus('ready');\r\n  };\r\n\r\n  const handleAnalysisComplete = (result: AnalysisResult) => {\r\n    setAnalysisResult(result);\r\n    setJobStatus('analyzed');\r\n  };\r\n\r\n  const handleTrimSelection = (start: number, end: number) => {\r\n    setTrimSelection({ start, end });\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      {/* Header */}\r\n      <header className=\"bg-white shadow-sm border-b\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n          <div className=\"flex items-center justify-between h-16\">\r\n            <div className=\"flex items-center space-x-3\">\r\n              <Music className=\"h-8 w-8 text-primary-600\" />\r\n              <h1 className=\"text-2xl font-bold text-gray-900\">SongSensei</h1>\r\n              <span className=\"text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded\">MVP</span>\r\n            </div>\r\n            <div className=\"flex items-center space-x-4\">\r\n              <span className=\"text-sm text-gray-600\">\r\n                Status: <span className=\"capitalize font-medium\">{jobStatus}</span>\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* Main Content */}\r\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n        <div className=\"space-y-8\">\r\n          \r\n          {/* YouTube URL Input */}\r\n          <div className=\"card\">\r\n            <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">\r\n              1. Load YouTube Video\r\n            </h2>\r\n            <YouTubeUrlInput \r\n              onJobCreated={handleJobCreated}\r\n              onShowDisclaimer={() => setShowDisclaimer(true)}\r\n              disabled={jobStatus === 'processing'}\r\n            />\r\n          </div>\r\n\r\n          {/* Waveform Viewer */}\r\n          {(jobStatus === 'processing' || waveformData) && (\r\n            <div className=\"card\">\r\n              <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">\r\n                2. Trim Audio Segment\r\n              </h2>\r\n              <WaveformViewer\r\n                jobId={currentJob}\r\n                data={waveformData}\r\n                onDataLoaded={handleWaveformLoaded}\r\n                onTrimSelection={handleTrimSelection}\r\n                isLoading={jobStatus === 'processing'}\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          {/* Analysis Controls */}\r\n          {trimSelection && jobStatus === 'ready' && (\r\n            <div className=\"card\">\r\n              <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">\r\n                3. Analyze Musical Content\r\n              </h2>\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"text-sm text-gray-600\">\r\n                  Selected: {trimSelection.start.toFixed(1)}s - {trimSelection.end.toFixed(1)}s\r\n                  ({(trimSelection.end - trimSelection.start).toFixed(1)}s duration)\r\n                </div>\r\n                <button \r\n                  className=\"btn-primary\"\r\n                  onClick={() => {\r\n                    setJobStatus('analyzing');\r\n                    // TODO: Trigger analysis\r\n                  }}\r\n                >\r\n                  <Play className=\"h-4 w-4 mr-2\" />\r\n                  Analyze Chords & Tabs\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Analysis Results */}\r\n          {analysisResult && (\r\n            <AnalysisPanel \r\n              result={analysisResult}\r\n              jobId={currentJob}\r\n              trimSelection={trimSelection}\r\n            />\r\n          )}\r\n\r\n          {/* Loading State */}\r\n          {jobStatus === 'analyzing' && (\r\n            <div className=\"card\">\r\n              <div className=\"flex items-center justify-center py-12\">\r\n                <div className=\"text-center\">\r\n                  <div className=\"loading-dots mb-4\">\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                  </div>\r\n                  <p className=\"text-gray-600\">Analyzing musical content...</p>\r\n                  <p className=\"text-sm text-gray-500 mt-2\">\r\n                    This may take 20-40 seconds for high-accuracy results\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n        </div>\r\n      </main>\r\n\r\n      {/* Footer */}\r\n      <footer className=\"bg-white border-t mt-16\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\r\n          <div className=\"flex items-center justify-between text-sm text-gray-500\">\r\n            <div>\r\n              SongSensei MVP - Educational use only\r\n            </div>\r\n            <div className=\"flex items-center space-x-4\">\r\n              <span>Powered by yt-dlp, Essentia, madmom & music21</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </footer>\r\n\r\n      {/* Legal Disclaimer Modal */}\r\n      {showDisclaimer && (\r\n        <LegalDisclaimer \r\n          onAccept={() => setShowDisclaimer(false)}\r\n          onCancel={() => setShowDisclaimer(false)}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}